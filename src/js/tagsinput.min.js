!function(t){"use strict";var e=function(){function t(t,e){for(var o in e){var n=e[o];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(t,e)}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),o=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};!function(t){var n=t.fn.tagsinput,i={id:null,delimiter:",",inputClass:".tagsinput",labelClass:".label .label-info",autocomplete:!1,minInput:2,maxTags:10,templates:{inputWrapper:'<div class="bootstrap-tagsinput" />',inputField:'<input type="text" autocomplete="false" />',tagItem:'<span class="tag" />',tagRemoveLink:'<a href="#" class="remove" data-dismiss="tag" aria-hidden="true">[x]</a>',autocompleteList:'<div class="autocomplete dropdown-menu" />',autocompleteItem:'<li><a class="item" href="#" /></li>'},onChange:function(){},onShow:function(){},onShown:function(){},onHide:function(){},onHidden:function(){},onAddTag:function(){},onRemoveTag:function(){},onAutocompleteSuccess:function(){},onAutocompleteError:function(){},onAutocompleteShow:function(){},onAutocompleteShown:function(){},onAutocompleteHide:function(){},onAutocompleteHidden:function(){},debug:!1},a=function(){function n(e,a){var s=this;o(s,n),a.inputClass=a.inputClass.replace(/\./g,""),a.labelClass=a.labelClass.replace(/\./g,""),s._config=t.extend({},i,e.data(),a),s._$element=e instanceof jQuery?e:t(e),s._config.id?s._tagsListId="tagsinput-"+s._config.id:s._tagsListId="tagsinput-"+Date.now().toString().substr(6),s.response=[],s._$element.each(function(){s.tags=[],s.format="string",s.$input=t(this),void 0!==s.$input&&s.buildTagsInput();var e=s.$input.val();try{s.tags={},s.format="json";var o=JSON.parse(e.split(s._config.delimiter));t.each(o,function(t,e){s.addTag(t,e)})}catch(n){s.tags=[],s.format="string",(o=e.split(s._config.delimiter)).length>0&&t.each(o,function(t,e){s.addTag(e)})}s.updateValues(),s.$tagsInput.on("keydown",function(t){var e=t.keyCode||t.which;if(13===e||43===e){t.preventDefault();var o=t.target.value.trim(),n=/([_a-z]\w*):\s*([^;]*)/gi.exec(o);null!==n?s.addTag(n[1],n[2]):s.addTag(o),s.updateValues(),t.target.value=""}}),0!=s._config.autocomplete&&s.buildAutocomplete(),s.$tagsInput.on("blur",function(t){if(0==s._config.autocomplete||!s.$autocomplete.hasClass("show")){var e=t.target.value.trim();if(e.length>0){var o=/([_a-z]\w*):\s*([^;]*)/gi.exec(e);null!==o?s.addTag(o[1],o[2]):s.addTag(e),s.updateValues(),t.target.value=""}}}),t("body").delegate("#"+s._tagsListId+' [data-dismiss="tag"]',"click",function(e){var o=t(e.target),n=o.data("value");s.removeTag(n)&&(o.parent(".label").remove(),s.updateValues())})})}return e(n,{element:{value:function(){return this._$element}},value:{value:function(){return this.$input.val()}},buildTagsInput:{value:function(){var e=t(this._config.templates.inputWrapper);e.attr("id",this._tagsListId),this.$input.css("display","none").removeAttr("class"),this.$input.attr("data-rel",this._tagsListId),this.$tagsInput=t(this._config.templates.inputField),this.$input.before(this.$tagsInput),this.$tagsInput.css("display","none"),this.$tagsInput.addClass(this._config.inputClass);var o=this.$input.attr("placeholder");this.$tagsInput.prop("placeholder",o),this.$tagsInput.wrap(e),0!=this._config.autocomplete&&(this.$autocomplete=t(this._config.templates.autocompleteList),this.$autocomplete.attr("id","autocomplete-"+this._tagsListId),this.$tagsInput.after(this.$autocomplete)),this.$input.prop("disabled")?(e.addClass("disabled"),this.$tagsInput.fadeOut()):(e.removeClass("disabled"),this.$tagsInput.fadeIn()),t("body").delegate("#"+this._tagsListId,"click",function(e){t(e.target).find("input").focus()})}},clearValues:{value:function(){this.$input.data("tags",[]),this.$input.val("")}},updateValues:{value:function(){this.$input.data("tags",this.tags),"json"==this.format?this.$input.val(JSON.stringify(this.tags)):this.$input.val(this.tags.join(this._config.delimiter)),this._config.maxTags>Object.keys(this.tags).length&&!this.$input.prop("disabled")&&this.$tagsInput.fadeIn(),this._config.onChange instanceof Object&&this._config.onChange instanceof Function&&(this._config.debug&&console.log("Call `onChange` method",this),this._config.onChange.call(this))}},removeTag:{value:function(e){var o=this,n=!1;if(e.length>0)if("json"==o.format)t.each(this.tags,function(t,n){n==e&&delete o.tags[t]}),o.updateValues(),n=!0;else{var i=t.inArray(e,o.tags);parseInt(i)>=0&&o.tags.splice(i,1)&&(o.updateValues(),n=!0)}return this._config.onRemoveTag instanceof Object&&this._config.onRemoveTag instanceof Function&&(this._config.debug&&console.log("Call `onRemoveTag` method",this),this._config.onRemoveTag.call(this)),n}},pushLabel:{value:function(e,o){0!=this._config.autocomplete&&this.$autocomplete.hasClass("show")&&(this._config.onAutocompleteHide instanceof Object&&this._config.onAutocompleteHide instanceof Function&&(this._config.debug&&console.log("Call `onAutocompleteHide` method",this),this._config.onAutocompleteHide.call(this)),this.autocompleteHide());var n=t(this._config.templates.tagItem),i=t(this._config.templates.tagRemoveLink);i.data("index",e),i.data("value",o),n.addClass(this._config.labelClass),n.append(o),this.$input.prop("disabled")||n.append(i),this.$tagsInput.before(n),this.$tagsInput.focus()}},addTag:{value:function(e,o){var n=!1;return this._config.maxTags>Object.keys(this.tags).length?(void 0===o&&(o=e.trim(),e="__#"+e.trim()),(o=o.trim()).length>=parseInt(this._config.minInput)&&("json"==this.format?void 0===this.tags[e.toString()]&&(this.tags[e.toString()]=o)&&(this.pushLabel(e,o),n=e):-1==t.inArray(o,this.tags)&&(e=this.tags.push(o))&&(this.pushLabel(e,o),n=e)),0!=this._config.autocomplete&&this.$autocomplete.hasClass("show")&&(this._config.onAutocompleteHide instanceof Object&&this._config.onAutocompleteHide instanceof Function&&(this._config.debug&&console.log("Call `onAutocompleteHide` method",this),this._config.onAutocompleteHide().call(this)),this.autocompleteHide()),this._config.onAddTag instanceof Object&&this._config.onAddTag instanceof Function&&(this._config.debug&&console.log("Call `onAddTag` method",this),this._config.onAddTag.call(this)),n):(this.$tagsInput.fadeOut(),!1)}},buildAutocomplete:{value:function(){var e=this,o=!1;e.$tagsInput.on("input",function(n){var i=n.target.value.trim();if(i.length>=parseInt(e._config.minInput)&&!o){o=!0;var a=e._config.autocomplete+"?value="+i+"&_t="+Date.now();t.get(a).success(function(n){if(e._config.onAutocompleteSuccess instanceof Object&&e._config.onAutocompleteSuccess instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteSuccess` method",this),e._config.onAutocompleteSuccess.call(this)),"json"==e.format&&n.length>0)e._config.onAutocompleteShow instanceof Object&&e._config.onAutocompleteShow instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteShow` method",this),e._config.onAutocompleteShow.call(this)),"object"!=typeof n&&(n=JSON.parse(n)),e.$autocomplete.empty(),t.each(n,function(o,n){if("object"==typeof n&&t.each(n,function(t,e){n=e}),n.substr(0,i.length).toUpperCase()==i.toUpperCase()){var a=t(e._config.templates.autocompleteItem),s=a.find("a");s.html("<b>"+n.substr(0,i.length)+"</b>"+n.substr(i.length)),s.data("index",o).data("value",n),s.attr("href","#"+o),e.$autocomplete.append(a)}}),e.autocompleteShow();else if(n.length>0){e.$autocomplete.empty(),e._config.onAutocompleteShow instanceof Object&&e._config.onAutocompleteShow instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteShow` method",this),e._config.onAutocompleteShow.call(this));for(var a=0;a<n.length;a++)if(n[a].substr(0,i.length).toUpperCase()==i.toUpperCase()){var s=t(e._config.templates.autocompleteItem),c=s.find("a");c.html("<b>"+n[a].substr(0,i.length)+"</b>"+n[a].substr(i.length)),c.data("value",n[a]),e.$autocomplete.append(s)}e.autocompleteShow()}else e._config.onAutocompleteHide instanceof Object&&e._config.onAutocompleteHide instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteHide` method",this),e._config.onAutocompleteHide().call(this)),e.autocompleteHide();o=!1}).error(function(){e._config.onAutocompleteError instanceof Object&&e._config.onAutocompleteError instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteError` method",this),e._config.onAutocompleteError.call(this)),o=!1})}}),t("body").delegate("#autocomplete-"+e._tagsListId+" a","click",function(o){o.preventDefault(),e.$tagsInput.val("");var n=t(o.target),i=n.data("index"),a=n.data("value");if(i&&a)var s=e.addTag(i,a);else s=e.addTag(a);s&&(e._config.onAutocompleteHide instanceof Object&&e._config.onAutocompleteHide instanceof Function&&(e._config.debug&&console.log("Call `onAutocompleteHide` method",this),e._config.onAutocompleteHide.call(this)),e.autocompleteHide(),e.updateValues())})}},autocompleteShow:{value:function(){this.$autocomplete.addClass("show"),this._config.onAutocompleteShown instanceof Object&&this._config.onAutocompleteShown instanceof Function&&(this._config.debug&&console.log("Call `onAutocompleteShown` method",this),this._config.onAutocompleteShown.call(this))}},autocompleteHide:{value:function(){this.$autocomplete.removeClass("show"),this.response=[],this._config.onAutocompleteHidden instanceof Object&&this._config.onAutocompleteHidden instanceof Function&&(this._config.debug&&console.log("Call `onAutocompleteHidden` method",this),this._config.onAutocompleteHidden.call(this))}}},{Default:{get:function(){return i}},_jQueryInterface:{value:function(e){var o=this;if("string"==typeof e){if("items"==e){var i=t(o);return JSON.stringify(i.data("tags"))}return null}return e=e||{},o.each(function(){var i=t(o),a=t.extend({},n.Default,i.data(),"object"==typeof e&&e);new n(o,a)})}}}),n}();t.fn.tagsinput=a._jQueryInterface,t.fn.tagsinput.Constructor=a,t.fn.tagsinput.noConflict=function(){return t.fn.tagsinput=n,a._jQueryInterface}}(jQuery)}(jQuery);
//# sourceMappingURL=tagsinput.js.map